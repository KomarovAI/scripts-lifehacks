# Скрипты и лайфхаки

Полезные скрипты и лайфхаки для автоматизации повседневных задач.

## SSH Auto Connect

### Описание
`ssh_auto_connect.py` - Python-скрипт для поддержания постоянного SSH-соединения с автоматическим переподключением при разрыве связи.

### Возможности
- Автоматическое переподключение при разрыве соединения
- Настраиваемая задержка между попытками переподключения
- Логирование всех событий с временными метками
- Корректное завершение по CTRL+C
- Поддержка HPN-SSH для улучшенной производительности

### Использование

1. **Установка зависимостей:**
   ```bash
   sudo apt update
   sudo apt install openssh-client hpn-ssh
   ```

2. **Настройка скрипта:**
   Отредактируйте параметры подключения в начале файла:
   ```python
   SSH_HOST = "your.server.ip"      # IP адрес сервера
   SSH_USER = "username"            # Имя пользователя
   SSH_KEY = "path/to/your/key"     # Путь к SSH ключу
   ```

3. **Запуск:**
   ```bash
   # Сделать исполняемым
   chmod +x ssh_auto_connect.py
   
   # Запустить
   python3 ssh_auto_connect.py
   # или
   ./ssh_auto_connect.py
   ```

### Настройки

- `RETRY_DELAY` - задержка между попытками переподключения (по умолчанию 5 секунд)
- `MAX_RETRIES` - максимальное количество попыток (0 = бесконечно)
- `SSH_CMD` - команда SSH с параметрами

### Пример вывода
```
[15:30:15] Подключаюсь к root@31.59.58.96...
[15:32:20] Соединение разорвано (код: 255)
[15:32:20] Переподключение через 5с... (попытка 1)
[15:32:25] Подключаюсь к root@31.59.58.96...
```

### Возможные проблемы и решения

1. **Ошибка "hpnssh not found":**
   ```bash
   sudo apt install hpn-ssh
   ```
   Или замените `hpnssh` на `ssh` в строке `SSH_CMD`

2. **Ошибка доступа к ключу:**
   ```bash
   chmod 600 ~/.ssh/your_key
   ```

3. **Permission denied:**
   - Проверьте правильность пути к ключу
   - Убедитесь, что ключ добавлен на сервер

## Лицензия

MIT License - свободное использование и модификация.

## Вклад в проект

Пул-реквесты приветствуются! Для серьёзных изменений сначала откройте issue для обсуждения.
